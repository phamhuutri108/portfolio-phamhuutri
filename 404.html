<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pham Huu Tri's Portfolio</title>

    <link rel="preconnect" href="https://ik.imagekit.io">
    <link rel="preconnect" href="https://www.youtube.com">


    <link rel="stylesheet" href="/style.css?v=5.0">
    <link rel="icon" type="image/jpeg" href="https://ik.imagekit.io/phamhuutri108/one%20buddha%20is%20not%20enough.JPG?updatedAt=1767888782643">

    <meta name="description" content="A human being.">
    <meta name="author" content="Pham Huu Tri">

    <meta property="og:type" content="website">
    <meta property="og:url" content="https://phamhuutri.com/">
    <meta property="og:title" content="Pham Huu Tri's Portfolio">
    <meta property="og:description" content="A human being.">

    <meta property="og:image" content="https://ik.imagekit.io/phamhuutri108/cover-meta.png">
    <meta property="og:image:width" content="1200">
    <meta property="og:image:height" content="630">

    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Pham Huu Tri's Portfolio">
    <meta name="twitter:description" content="A human being.">
    <meta name="twitter:image" content="https://ik.imagekit.io/phamhuutri108/cover-meta.png">
</head>
<body>

<div class="wrapper">
    <aside class="sidebar">

        <div class="lang-switch">
    <span class="lang-btn active" onclick="setLanguage('en')" id="btn-en">EN</span>
    <span class="separator">-</span>
    <span class="lang-btn" onclick="setLanguage('vi')" id="btn-vi">VI</span>
</div>
<div class="site-logo">
    </div>

        <div class="site-logo">
            <a href="javascript:void(0)" onclick="showPage('home')">
                <img src="https://ik.imagekit.io/phamhuutri108/tri_potrait_b&w.JPG" alt="Pham Huu Tri">
            </a>
        </div>

        <ul class="main-menu">
    <li>
        <a href="javascript:void(0)" onclick="showPage('home')" id="link-home" class="active-link">
            <span class="content-en">Home</span>
            <span class="content-vi">Trang chủ</span>
        </a>
    </li>
    <li>
        <a href="javascript:void(0)" onclick="showPage('about')" id="link-about">
            <span class="content-en">About</span>
            <span class="content-vi">Về tôi</span>
        </a>
    </li>
    <li>
        <a href="javascript:void(0)" onclick="showPage('contact')" id="link-contact">
            <span class="content-en">Contact</span>
            <span class="content-vi">Liên hệ</span>
        </a>
    </li>
</ul>

        <div class="category-group" id="group-short-films">
        <h4>
            <a href="javascript:void(0)" onclick="showPage('cat-short-films', 'group-short-films')" id="link-cat-short-films">
                <span class="content-en">Short Films</span>
                <span class="content-vi">Phim ngắn</span>
            </a>
        </h4>
        <ul class="category-list" id="sidebar-short-films-list"></ul>
    </div>

    <div class="category-group" id="group-commercials">
        <h4>
            <a href="javascript:void(0)" onclick="showPage('cat-commercials', 'group-commercials')" id="link-cat-commercials">
                <span class="content-en">Commercials</span>
                <span class="content-vi">Quảng cáo</span>
            </a>
        </h4>
        <ul class="category-list" id="sidebar-commercials-list"></ul>
    </div>

    <div class="category-group" id="group-others">
        <h4>
            <a href="javascript:void(0)" onclick="showPage('cat-others', 'group-others')" id="link-cat-others">
                <span class="content-en">Others</span>
                <span class="content-vi">Các dự án khác</span>
            </a>
        </h4>
        <ul class="category-list" id="sidebar-others-list"></ul>
    </div>

    <div class="category-group" id="group-writings">
        <h4>
            <a href="javascript:void(0)" onclick="showPage('cat-writings', 'group-writings')" id="link-cat-writings">
                <span class="content-en">Writings</span>
                <span class="content-vi">Viết</span>
            </a>
        </h4>
        <ul class="category-list" id="sidebar-writings-list"></ul>
    </div>

        <div class="copyright">
            <p>&copy; 2026 Pham Huu Tri.</p>
        </div>
    </aside>

    <main class="content">
        
        <div id="home" class="page-section active-section">
            <img src="https://ik.imagekit.io/phamhuutri108/one%20buddha%20is%20not%20enough.JPG" 
                 alt="Home Art" 
                 class="home-center-img">
            
            <div id="play-hint">
                <span class="content-en">Click to play</span>
                <span class="content-vi">Bấm để phát</span>
            </div>

            <div id="pause-hint">
                <span class="content-en">Click to pause</span>
                <span class="content-vi">Bấm để dừng</span>
            </div>
            
            <a id="music-credit" href="https://www.youtube.com/results?search_query=ten+bai+hat" target="_blank">
                ♫ Tên Bài Hát - Nghệ Sĩ ♫
            </a>
        </div>

        <div id="not-found" class="page-section" style="text-align: center; padding-top: 150px; display: none;">
        <h2 style="font-size: 40px; margin-bottom: 20px;">404</h2>
        <p style="font-size: 16px; margin-bottom: 30px;">
            <span class="content-en">Page not found.</span>
            <span class="content-vi">Trang này không tồn tại.</span>
        </p>
        <a href="javascript:void(0)" onclick="showPage('home')" 
           style="border-bottom: 1px solid #000; padding-bottom: 2px; font-weight: bold;">
            <span class="content-en">Go Back Home</span>
            <span class="content-vi">Về Trang Chủ</span>
        </a>
    </div>

        <div id="about" class="page-section">
    <h2 class="page-title">
        <span class="content-en">About</span>
        <span class="content-vi">Giới thiệu</span>
    </h2>
    
    <div class="about-text">
        <p>
            <span class="content-vi">
                Xin chào, tôi là <b>Phạm Hữu Trí</b>.<br>
                Hiện tại, tôi đang theo đuổi con đường làm phim độc lập và là một freelancer bán thời gian. Đôi khi, tôi viết.
            </span>
            <span class="content-en">
                Hello, I am <b>Pham Huu Tri</b>.<br>
                Currently, I am pursuing independent filmmaking and working as a part-time freelancer. Sometimes, I write.
            </span>
        </p>

        <h3 style="margin-top: 40px;">
            <span class="content-vi">Tuyên ngôn</span>
            <span class="content-en">Artist Statement</span>
        </h3>

        <p style="font-style: italic;">"A human being."</p>

        <p>
            <span class="content-vi">
                Thực hành nghệ thuật với tôi là hành trình khám phá tính nhân bản.
                Mỗi khung hình, mỗi dòng chữ đều là một nỗ lực để thấu hiểu việc làm người.
            </span>
            <span class="content-en">
                To me, artistic practice is a journey of exploring humanity.
                Every frame, every line is an effort to understand what it means to be human.
            </span>
        </p>

        <h3 style="margin-top: 40px;">
            <span class="content-vi">Giáo dục</span>
            <span class="content-en">Education</span>
        </h3>
        <p>
            <span class="content-vi"> <b>Đại học Văn Lang, TP. HCM</b> (2021 - 2026)<br>
            </span>

            <span class="content-en"> <b>Van Lang University, Vietnam</b> (2021 - 2026)<br>
            </span>
            <span class="content-vi" style="font-size: 11px; color: #666;">
                Chuyên ngành: Đạo diễn điện ảnh & truyền hình
            </span>
            <span class="content-en" style="font-size: 11px; color: #666;">
                Major: Art in Film & Television Directing
            </span>
        </p>

        <h3 style="margin-top: 40px;">
            <span class="content-vi">Quá trình làm phim - Giải thưởng</span>
            <span class="content-en">Filmography - Awards</span>
        </h3>
        
        <ul style="list-style: none; padding-left: 0; font-size: 12px;">
    
    <li style="margin-bottom: 5px;">
        2024 - <i>
            <span class="content-vi">Nghiệp</span>
            <span class="content-en">Karma</span>
        </i>
        <span class="content-vi">(Phim ngắn): <b>Cánh diều bạc</b>, Hội điện ảnh Việt Nam</span>
        <span class="content-en">(Short fiction): <b>Silver Prize</b>, Golden Kite Awards, Vietnam Cinema Association</span>
    </li>

    <li style="margin-bottom: 5px;">
        2023 - <i>
            <span class="content-vi">"Con Ma" Muốn Sống</span>
            <span class="content-en">"The Ghost" Wants to Live</span>
        </i>
        <span class="content-vi">(Phim tài liệu ngắn): <b>Giải ba</b>, Liên hoan phim ngắn TP. HCM</span>
        <span class="content-en">(Short documentary): <b>Third Prize</b>, HCMC Short Film Festival</span>
    </li>

    <li style="margin-bottom: 5px;">
        2022 - <i>
            <span class="content-vi">"Con Ma" Muốn Sống</span>
            <span class="content-en">"The Ghost" Wants to Live</span>
        </i> 
        <span class="content-vi">(Phim tài liệu ngắn): <b>Quỹ sáng tác trẻ</b>, Hội điện ảnh TP. HCM</span>
        <span class="content-en">(Short documentary): <b>Young Creativity Fund</b>, HCMC Cinema Association</span>
    </li>

    <li style="margin-bottom: 5px;">
        2020 - <i>
            <span class="content-vi">Khi Chúng Ta Được Sống</span>
            <span class="content-en">Alive</span>
        </i>
        <span class="content-vi">(Phim ngắn): <b>Phim xuất sắc nhất</b>, The Original Project, Hà Nội</span>
        <span class="content-en">(Short fiction): <b>Best Short Film</b>, The Original Project, Hanoi</span>
    </li>

    <li style="margin-bottom: 5px;">
        2020 - <i>
            <span class="content-vi">Khi Thành Phố Lớn</span>
            <span class="content-en">When My City Grows</span>
        </i>
        <span class="content-vi">(Phim tài liệu ngắn): <b>Giải nhì</b>, Le Filmmaking Camp, Quảng Trị - Đại sứ quán Mỹ tài trợ</span>
        <span class="content-en">(Short documentary): <b>Second Prize</b>, Le Filmmaking Camp, Quang Tri - Sponsored by the U.S. Embassy</span>
    </li>

</ul>

        <div id="resume-holder" style="text-align: center; margin-top: 60px; height: 50px;">
            <a href="https://drive.google.com/file/d/16exeCisXqDe9dqmPtJ8lGSgUCP4F9pD1/view?usp=sharing" target="_blank" id="wandering-resume">Resume</a>
        </div>
    </div>
</div>

        <div id="contact" class="page-section">
    <h2 class="page-title">
        <span class="content-en">Contact</span>
        <span class="content-vi">Liên hệ</span>
    </h2>
    
    <div class="about-text">
        <p>
            <b>
                <span class="content-en">Phone:</span>
                <span class="content-vi">Điện thoại:</span>
            </b> 
            <a href="tel:+84865953041" style="color: #111;">(+84) 865 953 041</a>
        </p>
        
        <p>
            <b>Email:</b> 
            <a href="mailto:contact@phamhuutri.com" style="color: #111;">contact@phamhuutri.com</a>
        </p>
        
        <p>
            <b>Instagram:</b> 
            <a href="https://www.instagram.com/phamhuutri.es" target="_blank">@phamhuutri.es</a>
        </p>
        
        <p>
            <b>Facebook:</b> 
            <a href="https://www.facebook.com/phamhuutri108/" target="_blank">Phạm Hữu Trí</a>
        </p>

        <div class="contact-image-wrapper">
            <img src="https://ik.imagekit.io/phamhuutri108/tri_portrait_b&w_3.jpg" 
                 alt="Contact Image"
                 id="musical-image">

            <div id="contact-play-hint">
                <span class="content-en">Click to play</span>
                <span class="content-vi">Bấm để phát</span>
            </div>

            <div id="contact-pause-hint">
                <span class="content-en">Click to pause</span>
                <span class="content-vi">Bấm để dừng</span>
            </div>

            <a id="contact-music-credit" href="https://www.youtube.com/results?search_query=trang+dieu+dep+nhat+ve+tinh+yeu" target="_blank">
                ♫ Trang - Điều đẹp nhất về tình yêu ♫
            </a>
        </div>

        <audio id="contact-audio">
            <source src="https://ik.imagekit.io/phamhuutri108/Trang-Dieu-dep-nhat-trong-tinh-yeu(from%20Album%20Trong).mp3?updatedAt=1768160921521" type="audio/mpeg">
        </audio>
    </div>
</div>

        <div id="cat-short-films" class="page-section">
    <h2 class="page-title">
        <span class="content-en">Short Films</span>
        <span class="content-vi">Phim ngắn</span>
    </h2>
    
    <div class="about-text">
        <p>
            <span class="content-en">2020 - present.</span>
            <span class="content-vi">2020 - hiện tại.</span>
        </p>
    </div>

    <div class="gallery-grid" id="grid-short-films" style="margin-top:30px;">

    </div>

</div>

        <div id="cat-commercials" class="page-section">
    <h2 class="page-title">
        <span class="content-en">Commercials</span>
        <span class="content-vi">Quảng cáo</span>
    </h2>
    
    <div class="about-text">
        <p>
            <span class="content-en">2024 - present.</span>
            <span class="content-vi">2024 - hiện tại.</span>
        </p>
    </div>

    <div class="gallery-grid" id="grid-commercials" style="margin-top:30px;">


    </div>
</div>


    <div id="cat-others" class="page-section">
            <h2 class="page-title">
                <span class="content-en">Others</span>
                <span class="content-vi">Các dự án khác</span>
            </h2>
            
            <div class="about-text">
                <p>
                    <span class="content-en">Other projects where I worked on Assistant Director.</span>
                    <span class="content-vi">Các dự án khác nơi tôi làm với vai trò trợ lý đạo diễn.</span>
                </p>
            </div>

            <div class="gallery-grid" id="grid-others" style="margin-top:30px;">

            </div>
        </div>








        <div id="cat-writings" class="page-section">
            <div class="writings-top-area">
                <h2 class="page-title">
                    <span class="content-en">Writings</span>
                    <span class="content-vi">Viết</span>
                </h2>
                <div id="writings-list-container"></div>
            </div>

            <div id="writings-detail-view" style="display: none;">
                <div style="margin-bottom: 20px;">
                    <a href="javascript:void(0)" onclick="closeWritingDetail()" 
                       style="font-size: 26px; text-decoration: none; color: #999; transition: all 0.2s; display: inline-block;"
                       onmouseover="this.style.color='#0033cc'; this.style.transform='translateX(-5px)'"
                       onmouseout="this.style.color='#999'; this.style.transform='translateX(0)'"
                       title="Back / Quay lại">
                        &larr;
                    </a>
                </div>
                
                <h2 class="page-title" id="detail-title" style="text-align: left;"></h2>
                
                <p style="font-size:13px; color:#666; margin-bottom:30px; font-style: italic; text-align: left;" id="detail-meta"></p>

                <div class="essay-content" id="detail-content" style="max-width: 100%; text-align: justify;"></div>
                
                <div style="height: 100px;"></div>
            </div>
        </div>




<script>
    /* --- HỆ THỐNG TỰ ĐỘNG HOÁ (OPTIMIZED: LAZY RENDERING) --- */

    // 1. CẤU HÌNH ĐƯỜNG DẪN TĨNH
    const urlMapping = {
        'home': '/',
        'about': '/about',
        'contact': '/contact',
        'cat-short-films': '/short-films',
        'cat-commercials': '/commercials',
        'cat-others': '/others',
        'cat-writings': '/writings'
    };

    // 2. HÀM TÌM DỮ LIỆU DỰ ÁN (Helper mới)
    // Giúp tìm thông tin dự án từ ID mà không cần loop nhiều lần
    function getProjectData(id) {
        if (typeof filmsData !== 'undefined' && filmsData[id]) return filmsData[id];
        if (typeof commercialData !== 'undefined' && commercialData[id]) return commercialData[id];
        if (typeof othersData !== 'undefined' && othersData[id]) return othersData[id];
        return null;
    }

    // 3. HÀM RENDER NỘI DUNG CHI TIẾT (Chỉ chạy khi người dùng bấm vào xem)
    function renderSectionContent(id) {
        // Nếu section đã tồn tại rồi thì không cần tạo lại
        if (document.getElementById(id)) return;

        const item = getProjectData(id);
        if (!item) return; // Không tìm thấy data thì thôi

        const contentContainer = document.querySelector('.content');
        const section = document.createElement('div');
        section.id = id;
        section.className = 'page-section';
        
        // Lúc này mới nhúng iframe Youtube vào -> Giảm tải cực lớn cho lúc mới vào web
        section.innerHTML = `
            <h2 class="page-title">
                <span class="content-en">${item.title.en}</span>
                <span class="content-vi">${item.title.vi}</span>
            </h2>
            <div class="about-text">
                <div class="content-vi">${item.vi}</div>
                <div class="content-en">${item.en}</div>
            </div>
        `;
        contentContainer.appendChild(section);
        
        // Cập nhật lại ngôn ngữ cho nội dung vừa mới sinh ra
        const currentLang = document.body.classList.contains('mode-vi') ? 'vi' : 'en';
        // (CSS đã tự xử lý ẩn hiện class mode-vi/en nên không cần set lại style thủ công)
    }

    // 4. HÀM XỬ LÝ URL
    function getIdFromUrl(path) {
        if (path.length > 1 && path.endsWith('/')) path = path.slice(0, -1);
        for (const [id, url] of Object.entries(urlMapping)) {
            if (url === path) return id;
        }
        
        const dynamicRoutes = [
            { prefix: '/short-films/',  idPrefix: 'short-films-' },
            { prefix: '/commercials/', idPrefix: 'commercials-' },
            { prefix: '/others/',      idPrefix: 'others-' },
            { prefix: '/writings/',    idPrefix: 'writings-' } 
        ];

        for (const route of dynamicRoutes) {
            if (path.startsWith(route.prefix)) {
                const slug = path.replace(route.prefix, '');
                return route.idPrefix + slug;
            }
        }
        return 'not-found';
    }

    // 5. HÀM SHOW PAGE (ĐÃ TỐI ƯU)
    function showPage(pageId, groupId = null, addToHistory = true) {
        if (!pageId) pageId = 'home';

        // A. Tự động xác định Group
        if (!groupId) {
            if (pageId.startsWith('short-films-') || pageId === 'cat-short-films') groupId = 'group-short-films';
            else if (pageId.startsWith('commercials-') || pageId === 'cat-commercials') groupId = 'group-commercials';
            else if (pageId.startsWith('others-') || pageId === 'cat-others') groupId = 'group-others';
            else if (pageId.startsWith('writings-') || pageId === 'cat-writings') groupId = 'group-writings';
        }

        // B. Xử lý Writing
        if (pageId.startsWith('writings-')) {
            showPage('cat-writings', 'group-writings', false);
            setTimeout(() => openWritingDetail(pageId), 50);
            if (addToHistory) {
                const slug = pageId.replace('writings-', '');
                updateHistory(pageId, 'group-writings', '/writings/' + slug);
            }
            return;
        }

        // C. [QUAN TRỌNG] RENDER DỮ LIỆU NẾU CHƯA CÓ
        // Nếu đây là trang dự án (có ID trong data), hãy tạo nội dung ngay bây giờ
        renderSectionContent(pageId);

        // D. XỬ LÝ GIAO DIỆN CHUNG
        const sections = document.querySelectorAll('.page-section');
        sections.forEach(s => s.classList.remove('active-section'));
        
        const activeSection = document.getElementById(pageId);
        if (activeSection) {
            activeSection.classList.add('active-section');
            window.scrollTo(0, 0);
        } else {
            if (pageId !== 'not-found') console.warn("Không tìm thấy section:", pageId);
        }

        // Active Menu & Sidebar
        const allLinks = document.querySelectorAll('a');
        allLinks.forEach(l => l.classList.remove('active-link'));
        const activeLink = document.getElementById('link-' + pageId);
        if (activeLink) activeLink.classList.add('active-link');

        const allGroups = document.querySelectorAll('.category-group');
        allGroups.forEach(g => g.classList.remove('is-open'));
        if (groupId) {
            const g = document.getElementById(groupId);
            if (g) g.classList.add('is-open');
        }

        // E. Cập nhật History
        if (addToHistory) {
            let url = urlMapping[pageId];
            if (!url) {
                if (pageId.startsWith('short-films-')) url = '/short-films/' + pageId.replace('short-films-', '');
                else if (pageId.startsWith('commercials-')) url = '/commercials/' + pageId.replace('commercials-', '');
                else if (pageId.startsWith('others-')) url = '/others/' + pageId.replace('others-', '');
            }
            if (url) updateHistory(pageId, groupId, url);
        }

        // F. Fix Writing List Animation
        if (pageId === 'cat-writings' && typeof renderWritingList === 'function') {
            setTimeout(renderWritingList, 10);
        }
    }

    function updateHistory(pageId, groupId, url) {
        if (window.location.pathname !== url) {
            window.history.pushState({ pageId, groupId }, "", url);
        }
    }

    // 6. NHÀ MÁY SẢN XUẤT (CHỈ TẠO SIDEBAR & GRID - KHÔNG TẠO CHI TIẾT)
    function renderProjectSystem(dataObj, sidebarId, gridId, groupId) {
        const sidebar = document.getElementById(sidebarId);
        const grid = document.getElementById(gridId);
        
        if (!dataObj) return;

        for (const [id, item] of Object.entries(dataObj)) {
            // A. Sidebar Link
            if (sidebar) {
                const li = document.createElement('li');
                li.innerHTML = `
                    <a href="javascript:void(0)" onclick="showPage('${id}', '${groupId}')" id="link-${id}">
                        <span class="content-en">${item.title.en}</span>
                        <span class="content-vi">${item.title.vi}</span>
                    </a>
                `;
                sidebar.appendChild(li);
            }

            // B. Grid Thumbnail
            if (grid) {
                const a = document.createElement('a');
                a.href = "javascript:void(0)";
                a.onclick = () => showPage(id, groupId);
                a.className = "gallery-item";
                
                // THÊM loading="lazy" vào thẻ img
                // Đây là cách tối ưu ảnh tốt nhất mà không cần giảm chất lượng
                a.innerHTML = `
                    <img src="${item.thumbnail || ''}" alt="${item.title.en}" loading="lazy">
                    <p style="margin-top: 5px; font-weight: bold;">
                        <span class="content-en">${item.title.en}</span>
                        <span class="content-vi">${item.title.vi}</span>
                    </p>
                `;
                grid.appendChild(a);
            }
            
            // LƯU Ý: Đã xóa phần tạo "Page Section" ở đây để tránh tải video ngầm
        }
    }

    // 7. KHỞI CHẠY
    document.addEventListener("DOMContentLoaded", () => {
        if (typeof filmsData !== 'undefined') renderProjectSystem(filmsData, 'sidebar-short-films-list', 'grid-short-films', 'group-short-films');
        if (typeof commercialData !== 'undefined') renderProjectSystem(commercialData, 'sidebar-commercials-list', 'grid-commercials', 'group-commercials');
        if (typeof othersData !== 'undefined') renderProjectSystem(othersData, 'sidebar-others-list', 'grid-others', 'group-others');

        if (typeof renderWritingList === 'function') {
            renderWritingList();   
            renderWritingSidebar(); 
        }

        const path = window.location.pathname;
        const initialId = getIdFromUrl(path);
        
        showPage(initialId, null, false);
    });

    window.onpopstate = function(event) {
        if (event.state) showPage(event.state.pageId, event.state.groupId, false);
        else showPage('home', null, false);
    };
</script>












<script>
    /* --- LOGIC: EXPLOSION + MUSIC HOME (FINAL) --- */
    document.addEventListener("DOMContentLoaded", () => {
        const homeSection = document.getElementById('home');
        const centerImage = document.querySelector('.home-center-img');
        const musicCredit = document.getElementById('music-credit');
        
        // CẤU HÌNH NHẠC HOME
        const bgMusic = new Audio('https://www.soundhelix.com/examples/mp3/SoundHelix-Song-1.mp3'); 
        bgMusic.loop = true; bgMusic.volume = 0.5;

        let hasChaosStarted = false;
        let resetTimer = null; 
        
        // Biến Drag Drop & Config (Rút gọn cho đỡ rối)
        let isDragging=false, currentDragItem=null, dragOffsetX=0, dragOffsetY=0;
        const wordsListEn = ["one", "Buddha", "is", "not", "enough"];
        const wordsListVi = ["một", "ông Bụt", "là", "không", "đủ"];
        const isMobile = window.innerWidth < 768;
        const WORD_COUNT = isMobile ? 50 : 120; 
        const MIN_SIZE = 7; const MAX_SIZE = 30;     
        function randomRange(min, max) { return Math.random() * (max - min) + min; }

        function startFloating(element) {
            const animations = element.getAnimations();
            animations.forEach(anim => anim.cancel());
            element.animate([
                { transform: `translate(-50%, -50%) rotate(0deg)` },
                { transform: `translate(calc(-50% + ${randomRange(-50,50)}px), calc(-50% + ${randomRange(-50,50)}px)) rotate(${randomRange(-90,90)}deg)` },
                { transform: `translate(-50%, -50%) rotate(0deg)` }
            ], { duration: randomRange(10000, 30000), iterations: Infinity, direction: 'alternate', easing: 'ease-in-out' });
        }

        // --- 1. BẬT NHẠC (PLAY) ---
        function createExplosion() {
            hasChaosStarted = true; 
            if (resetTimer) clearTimeout(resetTimer);
            bgMusic.play().catch(e => console.log("Lỗi:", e));
            
            // QUAN TRỌNG: Đánh dấu nhạc bật để CSS đổi chữ
            homeSection.classList.add('music-on'); 

            // Tạo chữ bay (Giữ nguyên logic cũ)
            const isVietnamese = document.body.classList.contains('mode-vi');
            const currentList = isVietnamese ? wordsListVi : wordsListEn;
            for (let i = 0; i < WORD_COUNT; i++) {
                const span = document.createElement('span');
                span.innerText = currentList[Math.floor(Math.random() * currentList.length)];
                span.className = 'chaos-word';
                span.style.pointerEvents = 'auto'; span.style.cursor = 'grab';
                const size = randomRange(MIN_SIZE, MAX_SIZE);
                span.style.fontSize = `${size}px`;
                span.style.opacity = randomRange(0.2, 0.8);
                span.style.left = '50%'; span.style.top = '50%';
                span.style.transform = 'translate(-50%, -50%)'; 
                const flyDuration = randomRange(4.0, 8.0); 
                homeSection.appendChild(span);
                // Animation setup
                requestAnimationFrame(() => {
                    span.style.transition = `left ${flyDuration}s cubic-bezier(0.165, 0.84, 0.44, 1), top ${flyDuration}s cubic-bezier(0.165, 0.84, 0.44, 1), opacity ${flyDuration}s ease`;
                    const targetX = randomRange(-10, 110); const targetY = randomRange(-10, 110);
                    span.style.left = `${targetX}%`; span.style.top = `${targetY}%`;
                    setTimeout(() => { if (hasChaosStarted && currentDragItem !== span) startFloating(span); }, flyDuration * 1000);
                });
            }
        }

        // --- 2. DỪNG NHẠC (PAUSE) ---
        function resetChaos() {
            hasChaosStarted = false; 
            
            // QUAN TRỌNG: Gỡ đánh dấu để CSS trả lại chữ "Click to play"
            homeSection.classList.remove('music-on');

            const words = document.querySelectorAll('.chaos-word');
            words.forEach(word => {
                const anims = word.getAnimations();
                anims.forEach(anim => anim.cancel());
                word.style.transition = "all 1.5s ease-in-out";
                word.style.left = '50%'; word.style.top = '50%'; word.style.opacity = '0'; 
            });
            resetTimer = setTimeout(() => {
                words.forEach(w => w.remove());
                bgMusic.pause(); // Pause nhạc
            }, 1500);
        }

        function toggleChaos() { if (!hasChaosStarted) createExplosion(); else resetChaos(); }
        
        // Giữ nguyên logic update ngôn ngữ và drag drop...
        const langSwitchBtn = document.querySelector('.lang-switch');
        if (langSwitchBtn) {
            langSwitchBtn.addEventListener('click', () => { 
                if (hasChaosStarted) {
                    const isVietnamese = document.body.classList.contains('mode-vi');
                    const currentList = isVietnamese ? wordsListVi : wordsListEn;
                    document.querySelectorAll('.chaos-word').forEach(w => w.innerText = currentList[Math.floor(Math.random() * currentList.length)]);
                }
            });
        }
        
        // (Giữ nguyên phần Drag & Drop để tiết kiệm chỗ...)
        
        if (centerImage) {
            centerImage.style.cursor = 'pointer'; 
            centerImage.addEventListener('click', (e) => { e.stopPropagation(); toggleChaos(); });
            centerImage.addEventListener('touchstart', (e) => { e.stopPropagation(); e.preventDefault(); toggleChaos(); });
        }
    });
</script>








                
<script>
    document.addEventListener("DOMContentLoaded", () => {
        const resumeLink = document.getElementById('wandering-resume');
        const aboutSection = document.getElementById('about');
        const resumeHolder = document.getElementById('resume-holder');
        
        let hasStarted = false; // Kiểm tra xem đã kích hoạt bay chưa
        let isHovering = false; 
        let moveTimer = null;   
        
        // Biến đếm số lần người dùng phải rượt đuổi
        let catchAttempt = 0; 
        const MAX_EVASION = 3; // Số lần nó bỏ chạy trước khi chịu đứng lại

        function random(min, max) {
            return Math.random() * (max - min) + min;
        }

        // Hàm tính toán vùng an toàn (Hành lang bên phải)
        function getNewCoordinates() {
            const containerW = aboutSection.offsetWidth;
            const containerH = aboutSection.offsetHeight;
            const itemW = resumeLink.offsetWidth;
            const itemH = resumeLink.offsetHeight;

            // Vùng an toàn: Nửa bên phải màn hình
            const safeZoneX = containerW * 0.40; 
            const minLeft = safeZoneX;
            const maxLeft = containerW - itemW - 20;

            const minTop = 80; // Tránh tiêu đề
            const maxTop = containerH - itemH - 20;

            // Fallback nếu màn hình quá nhỏ
            if (maxLeft < minLeft) return { left: containerW - itemW - 10, top: random(minTop, maxTop) };

            return {
                left: random(minLeft, maxLeft),
                top: random(minTop, maxTop)
            };
        }

        // HÀM 1: Di chuyển lơ lửng (Chậm)
        function moveResume() {
            if (!hasStarted) return; // Chưa bắt đầu thì không chạy
            
            // Nếu đang hover (đã bắt được) hoặc không ở tab About thì dừng
            if (isHovering || !aboutSection.classList.contains('active-section')) {
                moveTimer = setTimeout(moveResume, 1000);
                return;
            }

            // Xóa class bỏ chạy (nếu có) để trở về bay lơ lửng
            resumeLink.classList.remove('evading');

            const coords = getNewCoordinates();
            resumeLink.style.left = `${coords.left}px`;
            resumeLink.style.top = `${coords.top}px`;

            moveTimer = setTimeout(moveResume, 1300); // Tốc độ lơ lửng
        }

        // HÀM 2: Bỏ chạy (Nhanh)
        function evadeMouse() {
            // Thêm class evading để transition nhanh hơn (0.2s)
            resumeLink.classList.add('evading');
            
            const coords = getNewCoordinates();
            resumeLink.style.left = `${coords.left}px`;
            resumeLink.style.top = `${coords.top}px`;

            // Reset trạng thái hover để nó tiếp tục bay sau khi né
            isHovering = false;
            
            // Sau khi né xong (0.3s) thì quay lại chế độ bay lơ lửng
            setTimeout(() => {
                if (!isHovering) moveResume();
            }, 300);
        }

        // --- SỰ KIỆN TƯƠNG TÁC ---

        resumeLink.addEventListener('mouseenter', () => {
            // TRƯỜNG HỢP 1: Lần đầu tiên chạm vào -> KÍCH HOẠT GAME
            if (!hasStarted) {
                hasStarted = true;
                
                // Tính toán vị trí hiện tại so với khung cha để gán absolute không bị giật
                const rect = resumeLink.getBoundingClientRect();
                const parentRect = aboutSection.getBoundingClientRect();
                
                const startLeft = rect.left - parentRect.left;
                const startTop = rect.top - parentRect.top;

                // Chuyển sang Absolute
                resumeLink.style.left = `${startLeft}px`;
                resumeLink.style.top = `${startTop}px`;
                resumeLink.classList.add('flying');

                // Ngay lập tức bỏ chạy lần đầu tiên!
                catchAttempt++;
                evadeMouse();
                return;
            }

            // TRƯỜNG HỢP 2: Đã bay rồi -> XỬ LÝ RƯỢT ĐUỔI
            if (catchAttempt < MAX_EVASION) {
                catchAttempt++;
                // Bỏ chạy tiếp
                evadeMouse();
            } else {
                // TRƯỜNG HỢP 3: Đã đuổi đủ số lần -> ĐẦU HÀNG (Đứng yên)
                isHovering = true;
                clearTimeout(moveTimer);
                
                const computedStyle = window.getComputedStyle(resumeLink);
                resumeLink.style.transition = 'none'; // Freeze
                resumeLink.style.left = computedStyle.left;
                resumeLink.style.top = computedStyle.top;
            }
        });

        resumeLink.addEventListener('mouseleave', () => {
            // Nếu đã bắt được rồi mà thả ra thì reset lại game (hoặc cho bay tiếp tùy ý)
            // Ở đây mình cho nó bay tiếp lơ lửng
            if (hasStarted && isHovering) {
                isHovering = false;
                
                // Trả lại transition mượt
                resumeLink.style.transition = 'top 1.3s ease-in-out, left 1.3s ease-in-out, color 0.2s';
                moveResume();
                
                // MẸO: Reset lại số lần bắt để lần sau vào lại phải đuổi tiếp?
                // Nếu muốn khó thì uncomment dòng dưới:
                // catchAttempt = 0; 
            }
        });
    });
</script>


                
<script>
    // Hàm thiết lập ngôn ngữ
    function setLanguage(lang) {
        // 1. Gán class cho body (mode-en hoặc mode-vi)
        document.body.className = 'mode-' + lang;

        // 2. Đổi màu nút bấm (đậm nhạt)
        const btnEn = document.getElementById('btn-en');
        const btnVi = document.getElementById('btn-vi');

        if (lang === 'en') {
            btnEn.classList.add('active');
            btnVi.classList.remove('active');
        } else {
            btnVi.classList.add('active');
            btnEn.classList.remove('active');
        }

        // 3. Lưu lại lựa chọn (để F5 không bị mất)
        localStorage.setItem('preferredLang', lang);
    }

    // Tự động chạy khi vừa vào web
    document.addEventListener("DOMContentLoaded", () => {
        // Kiểm tra xem trước đó khách chọn gì, nếu chưa chọn thì mặc định là 'en' (Tiếng Anh)
        const savedLang = localStorage.getItem('preferredLang') || 'en';
        setLanguage(savedLang);
    });
</script>












<script>
    /* --- LOGIC: CONTACT MUSIC PLAYER (FINAL) --- */
    document.addEventListener("DOMContentLoaded", () => {
        const musicalImage = document.getElementById('musical-image');
        const contactAudio = document.getElementById('contact-audio');
        const contactWrapper = document.querySelector('.contact-image-wrapper'); // Lấy thẻ bao

        if (musicalImage && contactAudio && contactWrapper) {
            
            function toggleContactMusic() {
                if (contactAudio.paused) {
                    // --- BẬT ---
                    contactAudio.play();
                    // THÊM CLASS -> Chuyển sang chế độ "Nhạc đang bật"
                    contactWrapper.classList.add('music-on'); 
                    musicalImage.style.opacity = "0.8"; 
                } else {
                    // --- TẮT (PAUSE) ---
                    contactAudio.pause();
                    // GỠ CLASS -> Quay về chế độ "Chờ phát"
                    contactWrapper.classList.remove('music-on');
                    musicalImage.style.opacity = "1"; 
                }
            }

            musicalImage.addEventListener('click', (e) => {
                e.stopPropagation();
                toggleContactMusic();
            });
            musicalImage.addEventListener('touchstart', (e) => {
                e.stopPropagation(); e.preventDefault(); toggleContactMusic();
            });
        }
    });
</script>









<script src="/short-films-data.js?v=3.0"></script>
<script src="/commercials-data.js?v=3.0"></script>
<script src="/others-data.js?v=3.0"></script>
<script src="/writings-data.js?v=3.0"></script>


<div id="lightbox-overlay" class="lightbox-overlay" onclick="closeLightbox()">
    <span class="lightbox-close">&times;</span>
    <img id="lightbox-img" src="">
</div>

<script>
    // --- LOGIC LIGHTBOX ---
    
    // 1. Lắng nghe sự kiện click trên toàn bộ trang (Event Delegation)
    document.addEventListener('click', function(e) {
        // Kiểm tra xem cái được click có phải là ảnh trong gallery-wall không
        if (e.target && e.target.closest('.gallery-wall img')) {
            const imgSrc = e.target.src; // Lấy đường dẫn ảnh
            openLightbox(imgSrc);
        }
    });

    const lightbox = document.getElementById('lightbox-overlay');
    const lightboxImg = document.getElementById('lightbox-img');

    // 2. Hàm mở Lightbox
    function openLightbox(src) {
        lightboxImg.src = src;
        lightbox.style.display = "flex";
        // Ngăn cuộn chuột ở trang chính khi đang xem ảnh
        document.body.style.overflow = "hidden"; 
    }

    // 3. Hàm đóng Lightbox
    function closeLightbox() {
        lightbox.style.display = "none";
        // Cho phép cuộn trang trở lại
        document.body.style.overflow = "auto"; 
    }
</script>


<script>
    /* --- HỆ THỐNG VẬT LÝ: FIX LỖI TỤM GÓC --- */

    let animationFrameId; 
    const physicsItems = []; 

    function renderWritingList() {
        const container = document.getElementById('writings-list-container');
        if (!container || typeof writingData === 'undefined') return;

        // 1. Reset
        container.innerHTML = '';
        physicsItems.length = 0; 
        if (animationFrameId) cancelAnimationFrame(animationFrameId);






        
        // --- FIX QUAN TRỌNG: TÍNH TOÁN KÍCH THƯỚC AN TOÀN ---
        
        // Kiểm tra xem có đang ở trên mobile không (màn hình nhỏ hơn 768px)
        const isMobile = window.innerWidth < 768;
        
        // Nếu là mobile: Trừ đi rất ít (padding 20px) vì sidebar đã nằm ở trên đầu rồi
        // Nếu là desktop: Trừ đi 300px (sidebar) để chữ không bay đè lên sidebar
        const sidebarOffset = isMobile ? 20 : 300;

        // Tính chiều rộng an toàn
        const safeWidth = container.offsetWidth > 0 ? container.offsetWidth : (window.innerWidth - sidebarOffset);
        
        // Chiều cao an toàn
        const safeHeight = container.offsetHeight > 0 ? container.offsetHeight : window.innerHeight;


        // --- KHỞI TẠO VỊ TRÍ ---
        // Trừ thêm 50px - 100px để chữ không bị sát lề phải quá
        const startX = Math.random() * (safeWidth - 80); 
        const startY = Math.random() * (safeHeight - 50);





        // 2. Tạo phần tử
        writingData.forEach((item, index) => {
            const el = document.createElement('div');
            el.className = 'writings-scatter-item';
            
            el.innerHTML = `
                <span class="content-vi">${item.title.vi}</span>
                <span class="content-en">${item.title.en}</span>
            `;
            
            el.onclick = () => openWritingDetail(item.id);

            // Style
            const fontSize = Math.floor(Math.random() * 2) + 12; // 12px - 13px
            el.style.fontSize = fontSize + 'px';
            el.style.position = 'absolute';
            el.style.whiteSpace = 'nowrap';
            el.style.userSelect = 'none';
            el.style.cursor = 'pointer';
            el.style.opacity = Math.max(0.6, 1 - (index * 0.03));

            container.appendChild(el);

            // --- KHỞI TẠO VỊ TRÍ (DÙNG KÍCH THƯỚC AN TOÀN) ---
            const startX = Math.random() * (safeWidth - 100); 
            const startY = Math.random() * (safeHeight - 50);

            // Random vận tốc
            const vx = (Math.random() - 0.5) * 0.4; 
            const vy = (Math.random() - 0.5) * 0.4;

            physicsItems.push({
                el: el,
                x: startX,
                y: startY,
                vx: vx,
                vy: vy,
                width: 0, 
                height: 0
            });
        });

        // Đo kích thước thật ngay sau khi append
        physicsItems.forEach(item => {
            item.width = item.el.offsetWidth;
            item.height = item.el.offsetHeight;
        });

        runPhysicsLoop(container);
    }

    function runPhysicsLoop(container) {
        function update() {
            // Cập nhật lại kích thước khung chứa liên tục (đề phòng resize)
            // Nếu đang ẩn thì vẫn giữ logic cũ, nếu hiện thì lấy kích thước thật
            const containerW = container.offsetWidth > 0 ? container.offsetWidth : window.innerWidth;
            const containerH = container.offsetHeight > 0 ? container.offsetHeight : window.innerHeight;

            physicsItems.forEach((itemA, i) => {
                // A. Di chuyển
                itemA.x += itemA.vx;
                itemA.y += itemA.vy;

                // B. Va chạm tường (Wall Bounce)
                if (itemA.x <= 0) {
                    itemA.x = 0;
                    itemA.vx *= -1;
                } else if (itemA.x + itemA.width >= containerW) {
                    itemA.x = containerW - itemA.width;
                    itemA.vx *= -1;
                }

                if (itemA.y <= 0) {
                    itemA.y = 0;
                    itemA.vy *= -1;
                } else if (itemA.y + itemA.height >= containerH) {
                    itemA.y = containerH - itemA.height;
                    itemA.vy *= -1;
                }

                // C. Va chạm với nhau (Object Collision)
                for (let j = i + 1; j < physicsItems.length; j++) {
                    const itemB = physicsItems[j];

                    if (isOverlapping(itemA, itemB)) {
                        // Tính toán vector đẩy
                        let dx = (itemA.x + itemA.width/2) - (itemB.x + itemB.width/2);
                        let dy = (itemA.y + itemA.height/2) - (itemB.y + itemB.height/2);

                        if (dx === 0) dx = Math.random() - 0.5;
                        if (dy === 0) dy = Math.random() - 0.5;

                        const distance = Math.sqrt(dx*dx + dy*dy);
                        const unitX = dx / distance;
                        const unitY = dy / distance;

                        const pushForce = 0.2; 

                        // Đẩy vận tốc
                        itemA.vx += unitX * pushForce;
                        itemA.vy += unitY * pushForce;
                        itemB.vx -= unitX * pushForce;
                        itemB.vy -= unitY * pushForce;
                        
                        // Tách vị trí ngay lập tức (quan trọng để không bị dính)
                        const separateSpeed = 1; // Tăng lên một chút để tách nhanh hơn
                        itemA.x += unitX * separateSpeed;
                        itemA.y += unitY * separateSpeed;
                        itemB.x -= unitX * separateSpeed;
                        itemB.y -= unitY * separateSpeed;
                    }
                }

                // D. Giới hạn tốc độ (Friction)
                const maxSpeed = 0.8; // Tăng nhẹ max speed để chúng nó linh hoạt hơn
                if (itemA.vx > maxSpeed) itemA.vx = maxSpeed;
                if (itemA.vx < -maxSpeed) itemA.vx = -maxSpeed;
                if (itemA.vy > maxSpeed) itemA.vy = maxSpeed;
                if (itemA.vy < -maxSpeed) itemA.vy = -maxSpeed;

                // E. Render
                itemA.el.style.left = itemA.x + 'px';
                itemA.el.style.top = itemA.y + 'px';
            });

            animationFrameId = requestAnimationFrame(update);
        }
        update();
    }

    // Hàm kiểm tra va chạm (+ padding 15px cho thoáng)
    function isOverlapping(a, b) {
        const padding = 15; 
        return (
            a.x < b.x + b.width + padding &&
            a.x + a.width + padding > b.x &&
            a.y < b.y + b.height + padding &&
            a.y + a.height + padding > b.y
        );
    }

    /* --- CÁC HÀM PHỤ TRỢ --- */
    function renderWritingSidebar() {
        const sidebarList = document.getElementById('sidebar-writings-list');
        if (!sidebarList || typeof writingData === 'undefined') return;
        sidebarList.innerHTML = ''; 
        writingData.forEach(item => {
            const li = document.createElement('li');
            li.innerHTML = `
                <a href="javascript:void(0)" onclick="showPage('${item.id}')" id="link-${item.id}">
                    <span class="content-vi">${item.title.vi}</span>
                    <span class="content-en">${item.title.en}</span>
                </a>
            `;
            sidebarList.appendChild(li);
        });
    }

    // --- HÀM MỞ BÀI VIẾT (CẬP NHẬT URL) ---
    function openWritingDetail(id) {
        const post = writingData.find(item => item.id === id);
        if (!post) return;

        // 1. Điền dữ liệu
        const titleEl = document.getElementById('detail-title');
        const metaEl = document.getElementById('detail-meta');
        const contentEl = document.getElementById('detail-content');
        const viewEl = document.getElementById('writings-detail-view');

        if (titleEl) titleEl.innerHTML = `<span class="content-vi">${post.title.vi}</span><span class="content-en">${post.title.en}</span>`;
        if (metaEl) metaEl.innerText = `${post.location}, ${post.date}`;
        if (contentEl) contentEl.innerHTML = `<div class="content-vi">${post.content.vi}</div><div class="content-en">${post.content.en}</div>`;

        // 2. Hiện khung bài viết
        if (viewEl) {
            viewEl.style.display = 'block';
            setTimeout(() => {
                viewEl.scrollIntoView({ behavior: 'smooth', block: 'start' });
            }, 100);
        }

        // 3. [TỰ ĐỘNG HOÁ 100%] Tự tạo URL từ ID bài viết
        // Logic: Nếu ID là "writings-abc-xyz" -> Link sẽ là "/writings/abc-xyz"
        
        let newUrl = "";
        
        // Kiểm tra nếu có trong danh sách thủ công (urlMapping) thì ưu tiên dùng
        if (urlMapping[id]) {
            newUrl = urlMapping[id];
        } 
        // Nếu không có, tự động tạo ra từ ID
        else if (id.startsWith('writings-')) {
            const slug = id.replace('writings-', ''); // Cắt bỏ chữ "writings-" (6 ký tự đầu)
            newUrl = '/writings/' + slug;
        }

        // Tiến hành cập nhật URL nếu có thay đổi
        if (newUrl) {
            const currentPath = window.location.pathname;
            if (currentPath !== newUrl) {
                window.history.pushState({ pageId: id, groupId: 'group-writings' }, "", newUrl);
            }
        }
    }

    // --- HÀM ĐÓNG BÀI VIẾT (TRẢ VỀ URL GỐC) ---
    function closeWritingDetail() {
        const viewEl = document.getElementById('writings-detail-view');
        if (viewEl) {
            viewEl.style.display = 'none';
            const topArea = document.querySelector('.writings-top-area');
            if (topArea) topArea.scrollIntoView({ behavior: 'smooth' });
        }

        // Trả URL về /writings
        window.history.pushState({ pageId: 'cat-writings', groupId: 'group-writings' }, "", '/writings');
    }

    // Bắt sự kiện Resize để không bị lỗi văng ra ngoài
    window.addEventListener('resize', () => {
        const container = document.getElementById('writings-list-container');
        // Reset lại nếu cần thiết, hoặc để physics tự xử lý
    });

    document.addEventListener("DOMContentLoaded", () => {
        renderWritingList();   
        renderWritingSidebar(); 
    });
</script>

</body>
</html>